#!/usr/bin/env bash

set -o errexit -o nounset

main () {
  local command=( "$@" )
  while true; do
    {
      fswatch . -1 \
          | grep -qE '\.py$' \
        && "${command[@]}"
    } || {
      (( $? > 127 )) && exit  # exit on signals like ctrl-c
    }
  done
}


main "$@"
